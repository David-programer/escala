<div>
    <datalist id="datalist_tipo_finanzas">
        <option value="Gasto">Gasto</option>
        <option value="Ingreso">Ingreso</option>
    </datalist>

    <div>
        <app-tabset
            id="finanzas"
            #tabset_finanzas
            [tabs]="['INGRESO | EGRESO', 'COTIZACIONES']"
        >
            <div id="INGRESO | EGRESO">
                <app-tabset
                    id="ingreso_egreso"
                    [tabs]="['FILTRAR', 'CREAR']"
                >
                    <div id="CREAR INGRESO | EGRESO">
                        <div class="flex text-xs">
                            <span class="ml-auto p-1 rounded-md bg-orange-600 text-white">{{update_state ? 'ACTUALIZAR' : 'CREAR'}}</span>
                        </div>
                        <app-form-dynamic
                            #form_dynamic_finanzas
                            [inputs]="inputs_finanzas"
                            (reset)="close_modal()"
                            (submitEvent)="create_update_cotizacion($event)"
                        ></app-form-dynamic>
                    </div>

                    <div id="">
                        <div class="mb-5 mt-5">
                            <h3 class="text-lg text-gray-700 font-bold"><span class="cil-money mr-2"></span> REPORTE DE FINANZAS </h3>
                    
                            <div class="grid grid-cols-2 mt-2">
                                <div class="p-4 cursor-pointer border">
                                    <span class="text-sm text-gray-500 font-semibold"> <span class="mr-1 cil-caret-bottom"></span>Gasto</span>
                                    <p><span class="text-sm text-gray-500">{{proyecto?.material[0]?.concepto}}</span></p>
                                    <h2 class="text-gray-800 font-bold tracking-wider">{{proyecto?.material[0]?.valor ?? 0 | currency:'':'symbol':'1.0-0'}}</h2>
                                </div>
                                <div class="p-4 cursor-pointer border">
                                    <span class="text-sm text-gray-500 font-semibold"> <span class="mr-1 cil-caret-top"></span> Ingreso</span>
                                    <p><span class="text-sm text-gray-500">{{proyecto.material[1]?.concepto}}</span></p>
                                    <h2 class="text-gray-800 font-bold tracking-wider">{{proyecto?.material[1]?.valor ?? 0 | currency:'':'symbol':'1.0-0'}}</h2>
                                </div>
                            </div>
                        </div>
        
                        <app-datatable
                            #datatable_finanzas
                            [buttons]="[{icon: 'cil-pencil', text: '', id: 2}, {icon: 'cil-trash', text: '', id: 3, class: 'text-red-500'}]"
                            [keys]="['tipo','concepto', 'valor', 'createdAt']"
                            [titles]="['tipo', 'concepto', 'valor', 'fecha creaciÃ³n', 'opciones']"
                            (clickEmit)="$event.button.id == 2 ? handler_update_cotizacion($event.data) : handler_delete_cotizacion($event.data)"
                        ></app-datatable>
                    </div>
                </app-tabset>
            </div>

            <div id="COTIZACIONES">
                <datalist id="datalist_proyects">
                    <option *ngFor="let proyect of datalist_proyects" value="{{proyect.title}}"></option>
                </datalist>
            
                <datalist id="datalist_inventario">
                    <option *ngFor="let inventario of datalist_inventario" value="{{inventario.title}}"></option>
                </datalist>
<!--             
                <app-form-dynamic
                    #form_dynamic
                    [inputs]="inputs"
                    (reset)="handler_reset()"
                    (submitEvent)="create_or_update($event);"
                ></app-form-dynamic>
            
                <app-datatable
                    #datatable_cotizaciones
                    [buttons]="[{icon: 'cil-pencil', text: '', id: 2}, {icon: 'cil-trash', text: '', id: 1}]"
                    [keys]="['nombre_herramienta','referencia','marca','estado','codigo', 'estado_prestado', 'prestatario']"
                    [titles]="['Herramienta', 'Referencia', 'Marca', 'Estado', 'codigo', 'Prestamo', 'prestatario', 'opciones']"
                ></app-datatable> -->
            </div>
        </app-tabset>
    </div>
</div>

<app-alert #alert_finanzas></app-alert>
<app-loading *ngIf="loading"></app-loading>